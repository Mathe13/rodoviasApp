<!--
  Generated template for the InicioPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  <ion-navbar color="primary">

    <ion-title>
      Coletar Dados
    </ion-title>
  </ion-navbar>
</ion-header>


<ion-content padding style="background-color: #e8e8e8">
  <div id="quiz-mode" *ngIf="!status">
    <ion-card class="cartao-redondo">
      <ion-card-header>
        Status:<b *ngIf="status">Coletando</b><b *ngIf="!status">Desativado</b>
      </ion-card-header>

      <ion-card-content>
        <!-- <button ion-button color="danger" full round (click)="stop()">Cancelar</button> -->
        <button ion-button color="secondary" full round (click)="abreQuiz()" *ngIf="!status && !quiz">Iniciar</button>

        <div class="quiz cartao-redondo" *ngIf="quiz" text-wrap text-center>

          <h5 style="float: left;margin-top: -5%;">Responda</h5>
          <ion-item>

            <ion-label for="veiculo">Tipo de veiculo</ion-label>
            <ion-select id="veiculo" [(ngModel)]="veiculo" multiple="false">
              <ng-template ngFor let-v [ngForOf]="veiculos">
                <ion-option value={{v.id}}>{{v.nome}}</ion-option>
              </ng-template>
            </ion-select>
          </ion-item>
          <ion-item>

            <ion-label for="rodovia">Rodovia</ion-label>
            <ion-input required [(ngModel)]="rodovia" type="text" name="rodovia" placeholder="rodovia" value=""></ion-input>
          </ion-item>
          <ion-item>

            <ion-label for="faixa">Faixa</ion-label>
            <ion-input required [(ngModel)]="faixa" type="text" name="faixa" placeholder="esquerda/direita" value=""></ion-input>
          </ion-item>
          <ion-item>

            <ion-label for="rodovia">Anotações</ion-label>
            <ion-textarea required [(ngModel)]="anotacoes" type="text" name="anotacoes" placeholder="anotacoes" value=""></ion-textarea>
          </ion-item>

          <button ion-button color="secondary" full round (click)="create_trajeto()">Iniciar</button>
        </div>
      </ion-card-content>
    </ion-card>
  </div>



  <div id="coleta-mode">

    <ion-card class="cartao-redondo" *ngIf="status">
      <ion-card-header>
        Status:<b *ngIf="status">Coletando</b><b *ngIf="!status">Desativado</b>
      </ion-card-header>

      <ion-card-content>
        <button ion-button color="danger" full round (click)="stop()">Cancelar</button>
      </ion-card-content>
    </ion-card>



    <ion-card class="cartao-redondo">
      <ion-card-header>Gps</ion-card-header>
      <ion-card-content>
        <div *ngIf='giroscopio.length>0'>

          <ion-row>
            <ion-col>teste</ion-col>
          </ion-row>
          <ion-row>
            <ion-col>lat:{{(gps[gps.length-1]).lat}}</ion-col>
            <ion-col>lng:{{(gps[gps.length-1]).lng}}</ion-col>
          </ion-row>
        </div>
      </ion-card-content>
      <ion-row>
        <ion-col>
          <button ion-button icon-start clear small (click)="pushMapa()">
            <ion-icon name="map"></ion-icon>
            <div>Mapa</div>
          </button>
        </ion-col>
      </ion-row>
    </ion-card>

    <ion-card class="cartao-redondo">
      <ion-card-header>
        Acelerômetro
      </ion-card-header>

      <ion-card-content>
        <div *ngIf='giroscopio.length>0'>

          <ion-row id="x-row">
            <ion-col>x:{{acelerometro[acelerometro.length-1].x}}</ion-col>
            <!-- <ion-col>Δx:{{mostra.accelerometer_variation.x}}</ion-col> -->
          </ion-row>
          <ion-row id="y-row">
            <ion-col>y:{{acelerometro[acelerometro.length-1].y}}</ion-col>
            <!-- <ion-col>Δy:{{mostra.accelerometer_variation.y}}</ion-col> -->
          </ion-row>
          <ion-row id="z-row">
            <ion-col>z:{{acelerometro[acelerometro.length-1].z}}</ion-col>
            <!-- <ion-col>Δz:{{mostra.accelerometer_variation.z}}</ion-col> -->
          </ion-row>
        </div>
      </ion-card-content>
      <ion-row>
        <ion-col>
          <button ion-button icon-start clear small (click)="pushHistorico()">
            <ion-icon name="list-box"></ion-icon>
            <div>Histórico</div>
          </button>
        </ion-col>
      </ion-row>
    </ion-card>


    <ion-card class="cartao-redondo">
      <ion-card-header>
        Giroscópio
      </ion-card-header>

      <ion-card-content>
        <div *ngIf='giroscopio.length>0'>

          <ion-row id="x-row">
            <ion-col>x:{{giroscopio[giroscopio.length-1].x}}</ion-col>
            <!-- <ion-col>Δx:{{mostra.gyroscope_variation.x}}</ion-col> -->
          </ion-row>
          <ion-row id="y-row">
            <ion-col>y:{{giroscopio[giroscopio.length-1].y}}</ion-col>
            <!-- <ion-col>Δy:{{mostra.gyroscope_variation.y}}</ion-col> -->
          </ion-row>
          <ion-row id="z-row">
            <ion-col>z:{{giroscopio[giroscopio.length-1].z}}</ion-col>
            <!-- <ion-col>Δz:{{mostra.gyroscope_variation.z}}</ion-col> -->
          </ion-row>
        </div>
      </ion-card-content>
      <ion-row>
        <ion-col>
          <button ion-button icon-start clear small (click)="pushHistorico()">
            <ion-icon name="list-box"></ion-icon>
            <div>Histórico</div>
          </button>
        </ion-col>
      </ion-row>
    </ion-card>

  </div>



</ion-content>